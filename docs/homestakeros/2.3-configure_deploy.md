# 2.3 Configure and Deploy

This guide covers configuring your node using the HomestakerOS Web UI and deploying it to your target machine.

> **Prerequisite:** Make sure you've completed the [system preparation](2.1-prepare_system.md) steps before proceeding. You also need to have the HomestakerOS Web UI up and running as guided in the [Accessing the Web UI](2.2-accessing_webui.md).

## Basic Configuration

1. **Localization**:
   - **Hostname**: Set a name for your machine (**required**)
     > This identifies your node on the network and in logs
   - **Timezone**: Set a valid timezone identifier from the [tz database](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
     > This ensures logs and timestamps are properly aligned with your local time

2. **SSH**:
   - **Authorized Keys**: Add your public SSH key(s) to enable remote access (**required**)
     > Without this, you won't be able to access your node after deployment
   - **Private Key File**: Set to `/mnt/secrets/ssh/id_ed25519`
     > This tells the system where to generate the host key, ensuring consistent identity across reboots

> **Tip:** ðŸ’¡ You can build a working and accessible system via the HomestakerOS Web UI by just setting the hostname and one authorized key.

## Configure Storage Mounts

Configure the filesystem you created earlier:

1. In the **Mounts** section, add an entry for the main mount:

   ```
   what    -> /dev/disk/by-label/homestaker
   where   -> /mnt
   type    -> ext4
   ```

   This configuration ensures your persistent storage is automatically mounted at boot time, making your blockchain data and secrets available to the system.

## Configure Execution Client

Choose and configure one execution client (e.g., Erigon):

1. **Enable**: Set to `true`
4. Configure any additional options as needed
2. **Data Directory**: Set to `/mnt/erigon`
3. **JWT Secret File**: Set to `/mnt/secrets/jwt.hex`

> **Note:** For optimal network connectivity, consider port forwarding the TCP/UDP listening port on your router, which defaults to 30303 for all execution clients. However, this is not mandatory if your router supports NAT-PMP or UPnP protocols, which can automatically handle port mapping. Enhanced connectivity improves peering with other nodes and strengthens the overall network.

## Configure Consensus Client

Choose and configure one consensus client (e.g., Lighthouse):

1. **Enable**: Set to `true`
2. **Data Directory**: Set to `/mnt/lighthouse`
3. **JWT Secret File**: Set to `/mnt/secrets/jwt.hex`
   > This must match your execution client's JWT file
4. **Execution Endpoint**: Ensure this matches your execution client's endpoint
   > This links your consensus client to the execution layer
5. Configure any additional options as needed

> **Note:** Just like with execution clients, consensus clients also benefit from port forwarding (default port 9000). The same NAT-PMP or UPnP alternatives apply. Better connectivity ensures your node can properly discover and communicate with the broader network.

## Build Process

1. Click the `#BUIDL` button to build your host

   The build process creates a complete, bootable system image containing your exact configuration. This can take 15-30 minutes depending on your hardware, as it compiles and packages all necessary components.

2. A list of boot media files should appear, download each of them and transfer them to the target machine

   These files contain everything needed to boot your custom HomestakerOS image.

## Deployment

After downloading the boot media, deploy it to your target machine and kernel execute:

1. **Install kexec-tools**:

   ```bash
   apt-get install kexec-tools
   ```

   The kexec utility allows Linux to boot directly into another kernel without a full reboot, making deployment faster and more reliable.

2. **Execute the boot script**:

   ```bash
   sudo ./kexec-boot
   ```

   This script loads your custom HomestakerOS kernel and initramfs into memory and boots into it.

> **Note:** HomestakerOS runs entirely in RAM, which means user-generated directories and files will not persist across reboots.
All persistent data should be stored in the mounted filesystem(s).

## After Deployment

- Your node will be accessible via SSH using the keys you configured
- Check that both the execution and consensus clients are running correctly
- Monitor your node's performance and sync status

## Next Steps

After successfully deploying your node, you may want to:

- [Manage your configurations with Git](2.4-git_management.md) for version control
- Set up advanced features like [WireGuard VPN](3.1-wireguard_vpn.md) for secure remote access
- Add [SSV Node](3.2-ssv_node.md) for distributed validator technology
- Consult the [Reference](4-reference.md) for detailed configuration options
