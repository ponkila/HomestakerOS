# 2.2 Configure and Deploy

This guide covers configuring your node using the HomestakerOS Web UI and deploying it to your target machine.

> **Prerequisite:** Make sure you've completed the [system preparation](2.1-prepare_system.md) steps before proceeding.

## Accessing the Web UI

1. Start the backend and go to [https://homestakeros.com/](https://homestakeros.com/)
2. Set the flake URI (or use the default `ponkila/homestaking-infra`)
3. Click 'Submit' and go to the 'NixOS config' tab
4. Create a 'new node template' from the dropdown menu

## Minimal Required Configuration

> **Warning:** ⚠️ Without the required settings below, you won't be able to build or access your node after deployment.

At a minimum, you should configure these settings:

1. **Localization**:
   - **Hostname**: Set a name for your machine (**required**)
   - **Timezone**: Set a valid timezone identifier from the [tz database](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

2. **SSH**:
   - **Authorized Keys**: Add your public SSH key(s) to enable remote access (**required**)
   - **Private Key File**: Set to `/mnt/nvme/secrets/ssh/id_ed25519` - this tells the system where to generate the host key

## Configure Storage Mounts

Configure the filesystem you created earlier:

1. In the **Mounts** section, add an entry for the main mount:
   ```
   what    -> /dev/disk/by-label/homestaker
   where   -> /mnt/nvme
   type    -> ext4
   ```

## Configure Execution Client

> **Note:** You must choose one execution client to pair with your consensus client.

Choose and configure one execution client (e.g., Erigon):

1. **Enable**: Set to `true`
2. **Data Directory**: Set to `/mnt/nvme/erigon`
3. **JWT Secret File**: Set to `/mnt/nvme/secrets/jwt.hex`
4. Configure any additional options as needed

> **Important:** You will need to port forward the TCP/UDP listening port on your router, which defaults to 30303 for all execution clients.

## Configure Consensus Client

Choose and configure one consensus client (e.g., Lighthouse):

1. **Enable**: Set to `true`
2. **Data Directory**: Set to `/mnt/nvme/lighthouse`
3. **JWT Secret File**: Set to `/mnt/nvme/secrets/jwt.hex`
4. **Execution Endpoint**: Ensure this matches your execution client's endpoint
5. Configure any additional options as needed

> **Important:** You will need to port forward the TCP/UDP listening port on your router, which defaults to 9000 for all consensus clients.

## Build Process

1. Click the `#BUIDL` button to build your host (this might take a while)
2. A list of boot media files should appear, download each of them and transfer them to the target machine

## Deployment

After downloading the boot media, deploy it to your target machine and kernel execute:

1. **Install kexec-tools**:
   ```bash
   apt-get install kexec-tools
   ```

2. **Execute the boot script**:
   ```bash
   sudo ./kexec-boot
   ```

> **Note:** HomestakerOS runs entirely in RAM, which means user-generated directories and files will not persist across reboots. All persistent data should be stored in the mounted filesystem(s).

## After Deployment

- Your node will be accessible via SSH using the keys you configured
- Check that both the execution and consensus clients are running correctly
- Monitor your node's performance and sync status

## Next Steps

After successfully deploying your node, you may want to:

- [Manage your configurations with Git](2.3-git_management.md) for version control
- Set up advanced features like [WireGuard VPN](3.1-wireguard_vpn.md) for secure remote access
- Add [SSV Node](3.2-ssv_node.md) for distributed validator technology
- Consult the [Reference](4-reference.md) for detailed configuration options
